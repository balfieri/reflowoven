//---------------------------------------------------------------
// Misc Delay Functions
//---------------------------------------------------------------

#ifndef DELAY_H_
#define DELAY_H_

#include "esp_task.h"
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"

class Delay
{
public: 
    static void usec( uint32_t us );
    static void msec( uint32_t ms );    
    static void sec(  uint32_t s  );
};

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//
// IMPLEMENTATION
//
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

void Delay::usec( uint32_t us )
{
   ets_delay_us( us );
}

void Delay::msec( uint32_t ms )
{
   TickType_t ticks = ms / portTICK_PERIOD_MS;
   if ( ticks == 0 ) ticks = 1;
   vTaskDelay( ticks );
}

void Delay::sec( uint32_t s )
{
    Delay::msec( s * 1000 );
}

#endif // DELAY_H_
